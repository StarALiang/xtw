<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>register</title>
  <link rel="stylesheet" href="css/register.css">
</head>
<body>
	<div id="header">
	  <div>
		  <a class="logo" href="index.html">
			  <img src="img/login/logo.png" alt="">
			</a>
			<span class="logo-title">欢迎注册</span>
			<div class="regist_header_right">
        <div>
				  <a class="hd_menu" href="#">帮助中心</a>
				</div>
				<span>
				  您好，欢迎光临小跳蛙！
				  <a href="login.html" class="blue_link">请登录</a>
				</span>
			</div>
		</div>
	</div>
	<div id="container">
	  <h4 class="ct-title">小跳蛙注册</h4>
		<div>
		  <ul class="clearfix">
		  	<li>
				  <div id="a1" class="y_same_item">
						<input type="text" name="uname" id="uname" onfocus="uname_focus()" onblur="uname_blur()">
						<span id="s1" class="y_same_label">用户名</span>
					</div>
					<div id="d1"></div>
				</li>
		  	<li>
				  <div id="a2" class="y_same_item">
						<input type="text" id="phone" onfocus="phone_focus()" onblur="phone_blur()">
						<span id="s2" class="y_same_label">手机号</span>
					</div>
					<div id="d2"></div>
				</li>
		  	<li class="y_code_btn">
				  <div id="a3" class="y_same_item code_btn">
						<input type="text" onfocus="pc_focus()" id="pc">
						<span id="s3" class="y_same_label">获取验证码</span>
					</div>
					<a href="#">获取验证码</a>
					<div id="d3"></div>
				</li>
		  	<li>
				  <div id="a4" class="y_same_item">
						<input type="password" name="upwd" id="upwd" minlength="6" maxlength="15" onfocus="upwd_focus()" onblur="upwd_blur()">
						<span id="s4" class="y_same_label">设置密码</span>
					</div>
					<div id="d4"></div>
				</li>
		  	<li>
				  <div id="a5" class="y_same_item">
						<input type="password" id="upwd1" onfocus="upwd1_focus()" onblur="upwd1_blur()">
						<span id="s5" class="y_same_label">确认密码</span>
					</div>
					<div id="d5"></div>
				</li>
		  	<li>
				  <div class="y_agreement_word">
					  点击注册，表示您同意小跳蛙
						<a href="#">《服务协议及隐私声明》</a>
					</div>
					<a onclick="reg()" class="y_agreement_btn" href="#">同意协议并注册</a>
				</li>
		  </ul>
		</div>
	</div>
	<div id="footer">
	  <a href="#">沪ICP备16050468号</a> |
	  <a href="#">沪B2-20170039</a> |
	  <a href="#">营业执照</a>	
		<p>Copyright © 1号店网上超市 2007-2018，All Rights Reserved</p>
	</div>
  <script>
	//注册提示、验证
		//用户名验证
		a1.onclick=function(){
			uname.foucs=true;
			s1.style.left="-62px";
		  //s1.style.transform="translate(-82px)";
			//s1.className="y_same_label y_same_label_gd";
		  d1.innerHTML=`
			  <div class="y_regist_tip">4-20位字符，可由中文、英文、数字或符号“_”组成</div>
			`;
			}
		function uname_focus(){
			s1.style.left="-62px";
			d1.innerHTML=`
			  <div class="y_regist_tip">4-20位字符，可由中文、英文、数字或符号“_”组成</div>
			`;
	  }
		function uname_blur(){
		  if(!uname.value){
			  d1.innerHTML=`
			  <div class="y_regist_tip_ts">用户名不能为空</div>
			`;
			}else if(uname.value.length<4 || uname.value.length>20){
				d1.innerHTML=`
			  <div class="y_regist_tip bg">请输入正确的用户名,用户名应为4-20位字符</div>
			`;
			}else{
			  d1.innerHTML="";
			}
		}
		//手机号验证
		a2.onclick=function(){
			phone.focus=true;
			s2.style.left="-62px";
			d2.innerHTML=`
			  <div class="y_regist_tip">请填写正确的手机号码，以便接收订单通知，找回密码等</div>
			`;
		}
		function phone_focus(){
			s2.style.left="-62px";
			d2.innerHTML=`
			  <div class="y_regist_tip">请填写正确的手机号码，以便接收订单通知，找回密码等</div>
			`;
		}
		function phone_blur(){
		  if(!phone.value){
			  d2.innerHTML=`
			  <div class="y_regist_tip_ts">手机号不能为空</div>
			`;
			}else if(phone.value.length==7 || phone.value.length==8 || phone.value.length==11){
			  d2.innerHTML="";
			}else if(0){
			  d2.innerHTML="该电话已被占用";
			}else{
				d2.innerHTML=`
			  <div class="y_regist_tip bg">格式错误，请输入正确的手机号</div>
			`;
			}
		}
		//验证码验证
		a3.onclick=function(){
			pc.focus=true;
			s3.style.left="-90px";
		}
		function pc_focus(){
			s3.style.left="-90px";
		}
		//密码验证
		a4.onclick=function(){
			upwd.focus=true;
			s4.style.left="-76px";
		  d4.innerHTML=`
			  <div class="y_regist_tip">6-20位大小写英文字母、符号或数字的组合</div>
			`;
		}
		function upwd_focus(){
			s4.style.left="-76px";
		  d4.innerHTML=`
			  <div class="y_regist_tip">6-20位大小写英文字母、符号或数字的组合</div>
			`;
		}
		function upwd_blur(){
		  if(!upwd.value){
			  d4.innerHTML=`
			  <div class="y_regist_tip_ts">密码不能为空</div>
			`;
			}else if(upwd.value.length<6 || upwd.value.length>20){
				d4.innerHTML=`
			  <div class="y_regist_tip_ts wt">密码应为6-20位字符</div>
			`;
			}else{
			  d4.innerHTML="";
			}
		}
		//确认密码验证
		a5.onclick=function(){
			upwd1.focus=true;
			s5.style.left="-76px";
		  d5.innerHTML=`
			  <div class="y_regist_tip wt">请再次输入密码</div>
			`;
		}
		function upwd1_focus(){
			s5.style.left="-76px";
		  d5.innerHTML=`
			  <div class="y_regist_tip wt">请再次输入密码</div>
			`;
		}
		function upwd1_blur(){
		  if(upwd1.value!=upwd.value){
			  d5.innerHTML=`
			  <div class="y_regist_tip_ts wt2">两次输入的密码不一致</div>
			`;
			}else{
			  d5.innerHTML="";
			}
		}
	//信息提交
		function reg(){
		  //1.创建异步对象
			var xhr=new XMLHttpRequest();
			//4.绑定监听，接收请求
			xhr.onreadystatechange=function(){
			  if(xhr.readyState==4 && xhr.status==200){
				  var result=xhr.responseText;
					if(result==1){
					  alert("注册成功");
					  location.href="http://localhost:8080/login.html";
					}else{
					  alert("注册失败");
					}
				}
			}
			//2.打开连接，创建请求
			var url="/user/reg";
			xhr.open("post",url,true);
			//3.发送请求
			xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
			var formdate="uname="+uname.value+"&upwd="+upwd.value+"&phone="+phone.value;
			xhr.send(formdate);
		}
	</script>
</body>
</html>